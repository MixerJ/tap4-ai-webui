# Tap4 AI WebUI 项目规范

## 项目概述

Tap4 AI WebUI 是一个开源的 AI 工具导航和发现平台，旨在为用户提供全面的 AI 工具目录服务。项目采用现代化的技术栈构建，支持多语言、SEO 优化和响应式设计。

## 技术架构

### 前端架构
- **框架**: Next.js 14 with App Router
- **语言**: TypeScript (严格模式启用)
- **样式**: Tailwind CSS + Radix UI
- **状态管理**: React Hooks + Context
- **表单处理**: React Hook Form + Zod
- **国际化**: next-intl
- **部署**: Vercel

### 后端架构
- **数据库**: Supabase (PostgreSQL)
- **API**: Next.js API Routes
- **认证**: Supabase Auth
- **文件存储**: Supabase Storage
- **爬虫服务**: 独立的 Python 爬虫服务

### 开发工具
- **包管理**: pnpm
- **代码规范**: ESLint + Prettier
- **Git 钩子**: Husky
- **提交规范**: 待定义
- **CI/CD**: GitHub Actions

## 核心功能模块

### 1. 工具展示模块
- AI 工具卡片展示
- 工具详情页
- 工具搜索功能
- 工具分类过滤
- 分页展示

### 2. 工具提交模块
- 工具提交表单
- 表单验证
- 管理员审核流程
- 自动爬虫处理

### 3. 分类管理模块
- 工具分类展示
- 分类导航
- 分类统计

### 4. 搜索模块
- 全文搜索
- 高级搜索
- 搜索建议
- 搜索历史

### 5. 国际化模块
- 多语言切换
- 内容翻译
- 本地化格式
- RTL 支持

### 6. SEO 优化模块
- 动态 sitemap
- 元数据生成
- 结构化数据
- 性能优化

## 数据模型

### 核心数据表

#### web_navigation 表
```sql
CREATE TABLE web_navigation (
  id bigint PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY,
  name TEXT PRIMARY KEY,
  title TEXT,
  content TEXT,
  detail TEXT,
  url TEXT,
  image_url TEXT,
  thumbnail_url TEXT,
  website_data TEXT,
  collection_time TIMESTAMPTZ,
  star_rating INTEGER,
  tag_name TEXT,
  category_name TEXT
);
```

#### navigation_category 表
```sql
CREATE TABLE navigation_category (
  id bigint PRIMARY KEY GENERATED ALWAYS AS IDENTITY,
  name TEXT NOT NULL,
  title TEXT,
  sort INTEGER,
  del_flag INTEGER DEFAULT 0,
  create_by BIGINT DEFAULT 0,
  create_time TIMESTAMPTZ DEFAULT NOW()
);
```

#### submit 表
```sql
CREATE TABLE submit (
  id bigint PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY,
  created_at TIMESTAMPTZ DEFAULT NOW(),
  name TEXT,
  url TEXT,
  email TEXT,
  is_feature INTEGER DEFAULT 0,
  status INTEGER DEFAULT 0
);
```

## API 设计

### RESTful API 规范
- 使用标准的 HTTP 方法 (GET, POST, PUT, DELETE)
- 资源路径使用复数形式
- 状态码遵循 HTTP 标准
- 错误响应格式统一

### API 路由结构
```
api/
  cron/           # 定时任务
  cron_callback/  # 回调处理
  submit/         # 提交接口
```

## 组件架构

### 组件分类
- **页面组件**: 位于 app/ 目录下
- **UI 组件**: 位于 components/ui/ 目录
- **业务组件**: 按功能模块组织
- **工具组件**: 通用工具组件

### 组件设计原则
- 单一职责原则
- 可复用性
- 组合优于继承
- TypeScript 类型安全
- 无障碍访问支持

## 样式规范

### CSS 架构
- 使用 Tailwind CSS 工具类
- 自定义颜色变量
- 响应式设计
- 深色模式支持
- CSS 变量系统

### 组件样式
- 使用 clsx 进行条件样式
- 样式与逻辑分离
- 避免内联样式
- 使用语义化的类名

## 性能优化

### 前端优化
- React Server Components
- 图片懒加载和优化
- 代码分割
- 缓存策略
- Bundle 分析

### 后端优化
- 数据库查询优化
- API 响应缓存
- 爬虫性能优化
- CDN 加速

## 安全规范

### 前端安全
- XSS 防护
- CSRF 防护
- 输入验证
- 敏感信息处理

### 后端安全
- API 认证授权
- 数据库安全
- 文件上传安全
- 环境变量保护

## 部署规范

### 环境配置
- 开发环境 (.env.local)
- 测试环境 (.env.test)
- 生产环境 (.env.production)

### 部署流程
1. 代码审查
2. 自动化测试
3. 构建检查
4. 部署到预发布环境
5. 生产环境部署

## 测试策略

### 测试类型
- 单元测试 (Jest)
- 集成测试 (Testing Library)
- E2E 测试 (Playwright)
- 性能测试

### 测试覆盖
- 核心业务逻辑 100% 覆盖
- 组件交互 80% 覆盖
- API 接口 90% 覆盖
- 工具函数 100% 覆盖

## 监控和日志

### 监控指标
- 页面性能指标
- API 响应时间
- 错误率统计
- 用户行为分析

### 日志规范
- 结构化日志
- 错误日志聚合
- 性能日志记录
- 审计日志

## 文档规范

### 代码文档
- TypeScript 类型定义
- JSDoc 注释
- README 文件
- API 文档

### 用户文档
- 部署文档
- 使用说明
- 开发指南
- 贡献指南

## 版本管理

### 版本号规范
- 语义化版本 (MAJOR.MINOR.PATCH)
- 主版本：破坏性变更
- 次版本：新功能
- 补丁版本：修复

### 分支策略
- main: 主分支
- develop: 开发分支
- feature/*: 功能分支
- hotfix/*: 热修复分支
- release/*: 发布分支

## 贡献规范

### 开发流程
1. Fork 项目
2. 创建功能分支
3. 提交代码
4. 创建 Pull Request
5. 代码审查
6. 合并到主分支

### 代码提交规范
- 清晰的提交信息
- 相关的测试用例
- 更新文档
- 遵循代码规范

## 维护计划

### 定期维护
- 依赖包更新
- 安全漏洞修复
- 性能优化
- 功能增强

### 版本支持
- LTS 版本维护
- 安全更新
- 兼容性保证
- 废弃功能处理
